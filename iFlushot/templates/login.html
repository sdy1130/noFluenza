{% extends "base.html" %}
{% block body %}
<section class="hero is-white is-medium">
  <nav class="navbar is-transparent">
    <div class="navbar-brand">
      <a class="navbar-item" href="/">
        <img src="https://raw.githubusercontent.com/yanxi0830/uofthacks/master/iFlushot/media/flaskex-logo.png?token=ATBbhIeh1A7DibxTBSqBeX6L_RLYli58ks5cTJhEwA%3D%3D">
        <h6 href="/" class="subtitle"><strong>iFlushot</strong></h6>

      </a>
      <div id="navbar-burger-id" class="navbar-burger burger" data-target="navbar-menu-id">
        <span></span>
        <span></span>
        <span></span>
      </div>
    </div>
    <div id="navbar-menu-id" class="navbar-menu">
      <div class="navbar-end">
        <a class="navbar-item">
          <div class="field">
            <p class="control has-icons-left">
              <input class="login-input input is-small is-success" type="text" id="login-user" placeholder="Username">
                <span class="icon is-small is-left">
                  <i class="fa fa-user"></i>
                </span>
            </p>
          </div>
        </a>
        <a class="navbar-item">
          <div class="field">
            <p class="control has-icons-left">
              <input class="login-input input is-small is-success" type="password" id="login-pass" placeholder="Password">
                <span class="icon is-small is-left">
                  <i class="fa fa-lock"></i>
                </span>
            </p>
          </div>
        </a>
        <span class="navbar-item">
          <a id="login-button" class="button is-primary is-inverted">
            <span class="icon">
              <i class="fa fa-check"></i>
            </span>
            <span>Login</span>
          </a>
        </span>
      </div>
    </div>
  </nav>
</section>
<title>iFlushot</title>
<section class="hero is-primary is-bold is-medium">
  <div class="hero-body">
    <div class="container has-text-centered">
      <div class="columns">
        <div class="column is-auto">
          <br>
          <p class="title is-2">iFlushot</p>
          <p class="subtitle is-4"><i>Smarter way to fill your flushot form</i></p>
        </div>
        <div class="column is-auto">
          <div id="video">
    <video autoplay="true" id="videoElement">

    </video>
            </div>
              <br>
              <a id="picture-button" class="form-button button is-primary is-inverted is-outlined">Snap</a>
              <canvas id="canvas" style="display:none;" width="300" height="300"></canvas>
              <br>
              <br>
              <i><a id="feedback" class="feedback"></a></i>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>
<section class="hero">
  <footer class="footer">
    <div class="container">
      <div class="content has-text-centered">
        <p>
          <strong>iFlushot</strong> by Team Flu
          <span class="icon is-small">
            <i class="fa fa-copyright"></i>
          </span>2019</a>
        </p>
        <p>
          <a class="icon has-text-primary" href="http://anfederico.github.io" target="_blank">
            <i class="fa fa-globe"></i>
          </a>
          <a class="icon has-text-primary" href="https://github.com/anfederico" target="_blank">
            <i class="fa fa-github"></i>
          </a>
          <a class="icon has-text-primary" href="mailto:anfed@bu.edu" target="_blank">
            <i class="fa fa-envelope"></i>
          </a>
        </p>
      </div>
    </div>
  </footer>
</section>

{% endblock %}
{% block scripts %}
<script>

var video = document.querySelector("#videoElement");
var button = document.getElementById("picture-button");
var canvas = document.getElementById("canvas");

if (navigator.mediaDevices.getUserMedia) {
   navigator.mediaDevices.getUserMedia({video: true})
 .then(function(stream) {
   video.srcObject = stream;
   button.disabled = false;
   button.onclick = function () {
     canvas.getContext("2d").drawImage(video, 0, 0, 300, 300, 0, 0, 300, 300);
     var img = canvas.toDataURL("image/png").replace("image/png", "image/octet-stream");
     window.location.href=img; // it will save locally
     alert("Done");
   }
 })
 .catch(function(err0r) {
   console.log("Something went wrong!");
 });
}
</script>

<script src="../static/js/scripts.js"></script>
{% endblock %}
